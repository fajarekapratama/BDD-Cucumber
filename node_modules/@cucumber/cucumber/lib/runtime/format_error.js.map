{"version":3,"file":"format_error.js","sourceRoot":"","sources":["../../src/runtime/format_error.ts"],"names":[],"mappings":";;;;;;AAAA,yEAAkD;AAClD,4EAAiD;AACjD,8DAAwD;AAExD,SAAgB,WAAW,CAAC,KAAY,EAAE,iBAA0B;IAClE,IAAI,aAAqB,CAAA;IACzB,IAAI,iBAAiB,EAAE;QACrB,IAAI;YACF,aAAa,GAAG,IAAA,qCAAgB,EAAC,4BAAgB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;iBAC5D,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;iBACpB,IAAI,CAAC,IAAI,CAAC,CAAA;SACd;QAAC,WAAM;YACN,wEAAwE;SACzE;KACF;IACD,OAAO,IAAA,kCAAM,EAAC,KAAK,EAAE;QACnB,QAAQ,EAAE;YACR,UAAU,EAAE,CAAC,KAAa,EAAE,EAAE,CAC5B,aAAa,CAAC,CAAC,CAAC,KAAK,aAAa,EAAE,CAAC,CAAC,CAAC,KAAK;SAC/C;KACF,CAAC,CAAA;AACJ,CAAC;AAjBD,kCAiBC","sourcesContent":["import { format } from 'assertion-error-formatter'\nimport errorStackParser from 'error-stack-parser'\nimport { filterStackTrace } from '../filter_stack_trace'\n\nexport function formatError(error: Error, filterStackTraces: boolean): string {\n  let filteredStack: string\n  if (filterStackTraces) {\n    try {\n      filteredStack = filterStackTrace(errorStackParser.parse(error))\n        .map((f) => f.source)\n        .join('\\n')\n    } catch {\n      // if we weren't able to parse and filter, we'll settle for the original\n    }\n  }\n  return format(error, {\n    colorFns: {\n      errorStack: (stack: string) =>\n        filteredStack ? `\\n${filteredStack}` : stack,\n    },\n  })\n}\n"]}